
<% include ../templates/head.ejs %>
<h1 class="text-center">Calculatrice (v2)</h1>

<% include ./form.ejs %>

<!-- <div class="d-flex justify-content-center">
    <a class="btn btn-success" href="/calcul/add/">Ajouter</a>
</div> -->

<% if (locals.errorMsg) { %>
<div>
    <h2 class="text-center text-danger"><%= locals.errorMsg %></h2>
</div>
<% }%>

<% if (locals.data) { %>
<table class="table">
    <thead>
        <tr>
            <th class="text-center">Nombre 1</th>
            <th class="text-center">Nombre 2</th>
            <th class="text-center">Opérateur</th>
            <th class="text-center">Modifiable</th>
            <th class="text-center">Résultat</th>
            <th class="text-center">Actions</th>
        </tr>
    </thead>
    <tbody>
        <%for (var i = 0; i < data.length; i++) { %>
        <tr data-id="<%= data[i]._id %>" data-enabled="<%= (data[i].enabled) %>"
            class="<% if( data[i].enabled == 0){ %> row-disabled <% } %> ">
            <td data-number1="<%= data[i].number1 %>" class="text-center fs20" scope="row"><%= data[i].number1 %></td>
            <td data-number2="<%= data[i].number2 %>" class="text-center fs20" scope="row"><%= data[i].number2 %></td>
            <td data-operator="<%= data[i].operator %>" class="text-center fs20" scope="row"><%= data[i].operator %>
            </td>
            <td class="text-center fs20">
                <% if(data[i].enabled == 1){ %>
                <input class="disabled-checkbox" checked disabled type="checkbox" name="" id="">
                <% } else{ %>
                <input class="disabled-checkbox" disabled type="checkbox" name="" id="">
                <% } %>
            </td>
            <td class="text-center fs20" scope="row"><%= data[i].result %></td>
            <td class="text-center" scope="row">
                <div class="btn-group">

                    <a class="btn btn-primary" href="/calcul/show/<%= (data[i]._id) %>">Voir</a>
                    <a class="btn btn-warning <% if(data[i].enabled == 0){ %> disabled <% } %>"
                        href="/calcul/edit/<%= (data[i]._id) %>">Modifier</a>
                    <button type="button" class="btn btn-danger dropdown-toggle dropdown-toggle-split"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <!-- <span class="sr-only">Toggle Dropdown</span> -->
                    </button>
                    <div class="dropdown-menu <% if(data[i].enabled == 0){ %> disabled <% } %>">
                        <a class="dropdown-item"
                            href="/calcul/disable/<%= (data[i]._id) %>"><% if(data[i].enabled == 0){ %> Activer
                            <% } else{ %> Désactiver <% } %></a>
                        <a class="dropdown-item bg-danger text-white <% if(data[i].enabled == 0){ %> disabled <% } %>"
                            href="/calcul/delete/<%= (data[i]._id) %>">Supprimer</a>
                    </div>
                </div>
            </td>
        </tr>
        <% }%>

    </tbody>
</table>

<% }%>

<% include ../templates/footer.ejs %>